# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [defaultOptions](#defaultoptions)
-   [creationResultCallback](#creationresultcallback)
-   [createClient](#createclient)
-   [client](#client)
    -   [send](#send)
-   [sendCallback](#sendcallback)

## defaultOptions

Default options used to create a client. Gets merged in with the options you provide

**Examples**

```javascript
const defaultOptions = {
     rpc: {
         protocol: 'ws',
         host: '127.0.0.1',
         port: '50000',
         wsProtocols: null,
         wsOptions: null
     },
     stream: {
         protocol: 'ws',
         host: '127.0.0.1',
         port: '50001',
         wsProtocols: null,
         wsOptions: null
     }
 };
```

## creationResultCallback

This callback that is called after attempting to create a new client

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

**Parameters**

-   `error` **(null | [Error](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error))** Lets the caller know if there was an error creating the client
-   `client` **[client](#client)** The created client, ready to use

## createClient

Async function that creates a new krpc-node client

**Parameters**

-   `options` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** The options used to create the client, defaults to [defaultOptions](#defaultoptions)
    -   `options.rpc` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** The options used to create the web socket client for primary rpc calls to the server
        -   `options.rpc.protocol` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The protocol to use to connect to the server. `ws` or `wss`. (optional, default `ws`)
        -   `options.rpc.host` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The host address of the server. (optional, default `"127.0.0.1"`)
        -   `options.rpc.port` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number))** The port number on which to connect to the server. (optional, default `"50000"`)
        -   `options.rpc.wsProtocols` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>)?** WebSocket protocols to pass to the [ws](https://www.npmjs.com/package/ws) library.
        -   `options.rpc.wsOptions` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Additional connection options  to pass to the [ws](https://www.npmjs.com/package/ws) library.
    -   `options.stream` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** The options used to create the web socket client for stream rpc calls to the server
        -   `options.stream.protocol` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The protocol to use to connect to the server. `ws` or `wss`. (optional, default `ws`)
        -   `options.stream.host` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The host address of the server. (optional, default `"127.0.0.1"`)
        -   `options.stream.port` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number))** The port number on which to connect to the server. (optional, default `"50000"`)
        -   `options.stream.wsProtocols` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>)?** WebSocket protocols to pass to the [ws](https://www.npmjs.com/package/ws) library.
        -   `options.stream.wsOptions` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Additional connection options  to pass to the [ws](https://www.npmjs.com/package/ws) library.
-   `callback` **[creationResultCallback](#creationresultcallback)** The function called once the client has been created.

**Examples**

```javascript
const createClient = require('krpc-node');

      createClient(null, clientCreated);

      function clientCreated(err, client) {
          if (err) {
              throw err;
          }
          console.log('Connection Opened');
          client.send(client.services.krpc.getClients(), getClientsCompleted);
      }

      function getClientsCompleted(err, response) {
          if (err) {
              throw err;
          }
          expect(response.error).to.not.be.ok();
          expect(response.results.length).to.equal(1);
          let result = response.results[0];
          expect(result.error).to.not.be.ok();
          result.value.items.forEach(function(item) {
              expect(item).to.be.ok();
              console.log(item);
          });
      }
```

## client

**Parameters**

-   `callbackStack` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)>** An ordered array of callback functions to call when responses are received.
-   `decodeStack` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)>** An ordered array of decode functions to call when responses are received.
-   `rpc` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Contains items related to communicating directly with the server.
    -   `rpc.socket` **[WebSocket](https://developer.mozilla.org/docs/WebSockets)** The underlying websocket instance used for primary communications with the server.
    -   `rpc.emitter` **EventEmitter** The event emitter for primary rpc connection to the server
    -   `rpc.on` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Registers for one of the events for messages from the server [open, message, error, close].
-   `send` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Sends a one or more service call(s) to the server see [send](send). The documentation for available service calls can be found in the services section of the[main README.md](https://github.com/eXigentCoder/krpc-node/blob/master/README.md)
-   `services` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The collection of services that can be called.
    -   `services.krpc` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Main kRPC service, used by clients to interact with basic server functionality.[See the KRPC service.](https://github.com/eXigentCoder/krpc-node/blob/master/documentation/krpc.md)
    -   `services.spaceCenter` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Provides functionality to interact with Kerbal Space Program. This includes controlling the active vessel, managing its resources, planning maneuver nodes and auto-piloting.[See the SpaceCenter service.](https://github.com/eXigentCoder/krpc-node/blob/master/documentation/space-center.md)
    -   `services.drawing` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Provides functionality for drawing objects in the flight scene. For drawing and interacting with the user interface.[See the Drawing service.](https://github.com/eXigentCoder/krpc-node/blob/master/documentation/drawing.md)
    -   `services.ui` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Provides functionality for drawing and interacting with in-game user interface elements. For drawing 3D objects in the flight scene.[See the UI service.](https://github.com/eXigentCoder/krpc-node/blob/master/documentation/ui.md)
    -   `services.infernalRobotics` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** This service provides functionality to interact with the[Infernal Robotics](http://forum.kerbalspaceprogram.com/index.php?/topic/104535-105-magic-smoke-industries-infernal-robotics-0214) mod.[See the InfernalRobotics service.](https://github.com/eXigentCoder/krpc-node/blob/master/documentation/infernal-robotics.md)
    -   `services.kerbalAlarmClock` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** This service provides functionality to interact with the[Kerbal Alarm Clock](http://forum.kerbalspaceprogram.com/index.php?/topic/22809-10x-kerbal-alarm-clock-v3500-dec-3/) mod.[See the KerbalAlarmClock service.](https://github.com/eXigentCoder/krpc-node/blob/master/documentation/kerbal-alarm-clock.md)
    -   `services.remoteTech` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** This service provides functionality to interact with[RemoteTech](href="http://forum.kerbalspaceprogram.com/index.php?/topic/75245-11-remotetech-v1610-2016-04-12/) mod.[See the RemoteTech service.](https://github.com/eXigentCoder/krpc-node/blob/master/documentation/remote-tech.md)

### send

Sends a request to the server

**Parameters**

-   `calls` **(call | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;call>)** A list of rpc calls to make on the server
-   `sendCallback` **[sendCallback](#sendcallback)** 

## sendCallback

This callback that is called after attempting to send calls to the server

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

**Parameters**

-   `error` **(null | [Error](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error))** Lets the caller know if there was an error sending the calls to the server
-   `response` **[response](https://developer.mozilla.org/docs/Web/Guide/HTML/HTML5)** The server response
