# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [defaultOptions](#defaultoptions)
-   [creationResultCallback](#creationresultcallback)
-   [createClient](#createclient)
-   [client](#client)
    -   [send](#send)
-   [sendCallback](#sendcallback)

## defaultOptions

Default options used to create a client. Gets merged in with the options you provide

**Examples**

```javascript
const defaultOptions = {
     rpc: {
         protocol: 'ws',
         host: '127.0.0.1',
         port: '50000',
         wsProtocols: null,
         wsOptions: null
     },
     stream: {
         protocol: 'ws',
         host: '127.0.0.1',
         port: '50001',
         wsProtocols: null,
         wsOptions: null
     }
 };
```

## creationResultCallback

This callback that is called after attempting to create a new client

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

**Parameters**

-   `error` **(null | [Error](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error))** Lets the caller know if there was an error creating the client
-   `client` **[client](#client)** The created client, ready to use

## createClient

Async function that creates a new krpc-node client

**Parameters**

-   `options` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** The options used to create the client, defaults to [defaultOptions](#defaultoptions)
    -   `options.rpc` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** The options used to create the web socket client for primary calls to the server
        -   `options.rpc.protocol` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The protocol to use to connect to the server. `ws` or `wss`. (optional, default `ws`)
        -   `options.rpc.host` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The host address of the server. (optional, default `"127.0.0.1"`)
        -   `options.rpc.port` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number))** The port number on which to connect to the server. (optional, default `"50000"`)
        -   `options.rpc.wsProtocols` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>)?** WebSocket protocols to pass to the [ws](https://www.npmjs.com/package/ws) library.
        -   `options.rpc.wsOptions` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Additional connection options  to pass to the [ws](https://www.npmjs.com/package/ws) library.
    -   `options.stream` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** The options used to create the web socket client for stream calls to the server
        -   `options.stream.protocol` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The protocol to use to connect to the server. `ws` or `wss`. (optional, default `ws`)
        -   `options.stream.host` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The host address of the server. (optional, default `"127.0.0.1"`)
        -   `options.stream.port` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number))** The port number on which to connect to the server. (optional, default `"50000"`)
        -   `options.stream.wsProtocols` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>)?** WebSocket protocols to pass to the [ws](https://www.npmjs.com/package/ws) library.
        -   `options.stream.wsOptions` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Additional connection options  to pass to the [ws](https://www.npmjs.com/package/ws) library.
-   `callback` **[creationResultCallback](#creationresultcallback)** The function called once the client has been created.

**Examples**

```javascript
const createClient = require('krpc-node');

      createClient(null, clientCreated);

      function clientCreated(err, client) {
          if (err) {
              throw err;
          }
          console.log('Connection Opened');
          client.send(client.services.krpc.getClients(), getClientsCompleted);
      }

      function getClientsCompleted(err, response) {
          if (err) {
              throw err;
          }
          expect(response.error).to.not.be.ok();
          expect(response.results.length).to.equal(1);
          let result = response.results[0];
          expect(result.error).to.not.be.ok();
          result.value.items.forEach(function(item) {
              expect(item).to.be.ok();
              console.log(item);
          });
      }
```

## client

**Parameters**

-   `send` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Sends a call to the server see [send](send)

### send

Sends a request to the server

**Parameters**

-   `calls` **(call | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;call>)** A list of rpc calls to make on the server
-   `sendCallback` **[sendCallback](#sendcallback)** 

## sendCallback

This callback that is called after attempting to send calls to the server

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

**Parameters**

-   `error` **(null | [Error](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error))** Lets the caller know if there was an error sending the calls to the server
-   `response` **[response](https://developer.mozilla.org/docs/Web/Guide/HTML/HTML5)** The server response
